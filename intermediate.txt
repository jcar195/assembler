0	COPY	START	0	.COPY FILE FROM INPUT TO OUTPUT	
0	FIRST	STL	RETADR	.SAVE RETURN ADDRESS	
3	CLOOP	JSUB	RDREC	.READ INPUT RECORD	
6		LDA	LENGTH	.TEST FOR EOF (LENGTH = 0)	
9		COMP	#0	
c		JEQ	ENDFIL	.EXIT IF EOF FOUND	
f		JSUB	WRREC	.WRITE OUTPUT RECORD	
12		J	CLOOP	.LOOP	
15	ENDFIL	LDA	=C'EOF'	.INSERT END OF FILE MARKER	
18		STA	BUFFER	
1b		LDA	#3	
1e		STA	LENGTH	
21		JSUB	WRREC	
24		J	@RETADR	.RETURN TO CALLER	
27		USE	CDATA	
27	RETADR	RESW	1	
2a	LENGTH	RESW	1	.LENGTH OF RECORD	
2d		USE	CBLKS	
2d	BUFFER	RESB	4096	.4096-BYTE BUFFER AREA	
102d	BUFEND	EQU	*	.FIRST LOCATION AFTER BUFFER	
102d	MAXLEN	EQU	BUFEND-BUFFER	.MAXIMUM RECORD LENGTH	



102d		USE		
102d	RDREC	CLEAR	X	.CLEAR LOOP COUNTER	
102f		CLEAR	A	.CLEAR A TO ZERO	
1031		CLEAR	S	.CLEAR S TO ZERO	
1033		+LDT	#MAXLEN	
1037	RLOOP	TD	INPUT	.TEST INPUT DEVICE	
103a		JEQ	RLOOP	LOOP UNTIL READY	
103d		RD	INPUT	.READ CHARACTER INTO REGISTER A	
1040		COMPR	A,S	.TEST FOR END OF RECORD (X'00')	
1042		JEQ	EXIT	.EXIT LOOP IF EOR	
1045		STCH	BUFFER,X	.STORE CHARACTER IN BUFFER	
1048		TIXR	T	.LOOP UNLESS MAX LENGTH HAS BEEN REACHED	
104a		JLT	RLOOP	
104d	EXIT	STX	LENGTH	.SAVE RECORD LENGTH	
1050		RSUB		RETURN TO CALLER	
1050		USE	CDATA	
1050	INPUT	BYTE	X'F1'	.CODE FOR INPUT DEVICE	



1050		USE		
1050	WRREC	CLEAR	X	.CLEAR LOOP COUNTER	
1052		LDT	LENGTH	
1055	WLOOP	TD	=X'05'	.TEST INPUT DEVICE	
1058		JEQ	WLOOP	.LOOP UNTIL READY	
105b		LDCH	BUFFER,X	.GET CHARACTER FROM BUFFER	
105e		WD	=X'05'	.WRITE CHARACTER	
1061		TIXR	T	.LOOP UNTIL ALL CHARACTERS HAVE BEEN WRITTEN	
1063		JLT	WLOOP	
1066		RSUB		.RETURN TO CALLER	
1066		USE	CDATA	
1066		LTORG		
1066		END	FIRST	
